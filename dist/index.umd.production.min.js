/**
 * @license Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md.
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).CKEditor4React={},e.React)}(this,(function(e,t){"use strict";function n(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,Object.freeze(t)}var r=n(t),o=function(){return o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},o.apply(this,arguments)};function a(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}var i=["activeEnterModeChange","activeFilterChange","afterCommandExec","afterInsertHtml","afterPaste","afterPasteFromWord","afterSetData","afterUndoImage","ariaEditorHelpLabel","ariaWidget","autogrow","beforeCommandExec","beforeDestroy","beforeGetData","beforeModeUnload","beforeSetMode","beforeUndoImage","blur","change","configLoaded","contentDirChanged","contentDom","contentDomInvalidated","contentDomUnload","contentPreview","customConfigLoaded","dataFiltered","dataReady","destroy","dialogHide","dialogShow","dirChanged","doubleclick","dragend","dragstart","drop","elementsPathUpdate","exportPdf","fileUploadRequest","fileUploadResponse","floatingSpaceLayout","focus","getData","getSnapshot","insertElement","insertHtml","insertText","instanceReady","key","langLoaded","loadSnapshot","loaded","lockSnapshot","maximize","menuShow","mode","notificationHide","notificationShow","notificationUpdate","paste","pasteFromWord","pluginsLoaded","readOnly","removeFormatCleanup","required","resize","save","saveSnapshot","selectionChange","setData","stylesRemove","stylesSet","template","toDataFormat","toHtml","uiSpace","unlockSnapshot","updateSnapshot","widgetDefinition"],d=["beforeLoad","namespaceLoaded"],c=a(a([],i,!0),d,!0),s="__CKE__";function u(e){return"".concat(s).concat(e)}function l(e){return e.substr(s.length)}function f(e){var t=e.substr(0,1).toUpperCase()+e.substr(1);return"on".concat(t)}function p(e){return e.substr(2,1).toLowerCase()+e.substr(3)}var y=a(a([],i,!0),d,!0).reduce((function(e,t){var n;return o(o({},e),((n={})[t]=u(t),n))}),{});function v(e){return e.split(/(?=[A-Z])/).join("-").toLowerCase()}function h(e,t,n){var r={display:"none",visibility:"hidden"};return"classic"===e?r:"ready"===t?null!=n?n:void 0:r}function g(e){var t=e.debug,n=e.editor,r=e.evtName,o=e.handler,a=e.listenerData,i=e.priority,d=t&&Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,5),c=o;return t&&(c=function(e){console.log({operation:"invoke",editor:n.name,evtName:r,handlerId:d,data:e.data,listenerData:e.listenerData}),o(e)}),t&&console.log({operation:"register",editor:n.name,evtName:r,handlerId:d}),n.on(r,c,null,a,i),function(){t&&console.log({operation:"unregister",editor:n.name,evtName:r,handlerId:d}),n.removeListener(r,c)}}var m,b={};function O(e,t){e.onload=function(){this.onerror=this.onload=null,t(null,e)},e.onerror=function(){this.onerror=this.onload=null,t(new Error("Failed to load "+this.src),e)}}function E(e,t){e.onreadystatechange=function(){"complete"!=this.readyState&&"loaded"!=this.readyState||(this.onreadystatechange=null,t(null,e))}}function S(e,t){return"CKEDITOR"in window?Promise.resolve(CKEDITOR):"string"!=typeof e||e.length<1?Promise.reject(new TypeError("CKEditor URL must be a non-empty string.")):(m||(m=S.scriptLoader(e).then((function(e){return t&&t(e),e}))),m)}Object.defineProperty(b,"__esModule",{value:!0}),S.scriptLoader=function(e){return new Promise((function(t,n){var r,o,a,i,d;r=e,o=function(e){return m=void 0,e?n(e):window.CKEDITOR?void t(CKEDITOR):n(new Error("Script loaded from editorUrl doesn't provide CKEDITOR namespace."))},i=document.head||document.getElementsByTagName("head")[0],d=document.createElement("script"),"function"==typeof o&&(a=o,o={}),o=o||{},a=a||function(){},d.type=o.type||"text/javascript",d.charset=o.charset||"utf8",d.async=!("async"in o)||!!o.async,d.src=r,o.attrs&&function(e,t){for(var n in t)e.setAttribute(n,t[n])}(d,o.attrs),o.text&&(d.text=String(o.text)),("onload"in d?O:E)(d,a),d.onload||O(d,a),i.appendChild(d)}))},b.debounce=function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(){clearTimeout(n);for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];n=setTimeout(e.bind.apply(e,[r].concat(a)),t)}};var x=b.getEditorNamespace=S,C=r.useEffect,D=r.useReducer,w=r.useRef,T={};function j(e){var t=e.config,n=e.debug,r=e.dispatchEvent,o=e.subscribeTo,a=void 0===o?c:o,i=e.editorUrl,u=e.element,l=e.initContent,f=e.type,p=void 0===f?"classic":f,v=w(i||"https://cdn.ckeditor.com/4.20.1/standard-all/ckeditor.js"),h=w(null!=a?a:c),m=w(n),b=w(r),O=w(l),E=w(t||T),S=w(p),j=D(k,{editor:void 0,hookStatus:"init"}),R=j[0],P=R.editor,L=R.hookStatus,U=j[1];return C((function(){if(u&&!P){U({type:"loading"});x(v.current,(function(e){var t;-1!==h.current.indexOf("namespaceLoaded")&&(null===(t=b.current)||void 0===t||t.call(b,{type:y.namespaceLoaded,payload:e}))})).then((function(e){var t,n="inline"===S.current,r=E.current.readOnly;-1!==h.current.indexOf("beforeLoad")&&(null===(t=b.current)||void 0===t||t.call(b,{type:y.beforeLoad,payload:e}));var o=e[n?"inline":"replace"](u,E.current);h.current.filter((function(e){return-1===d.indexOf(e)})).forEach((function(e){g({debug:m.current,editor:o,evtName:e,handler:function(t){var n;null===(n=b.current)||void 0===n||n.call(b,{type:"".concat(s).concat(e),payload:t})}})})),g({debug:m.current,editor:o,evtName:"loaded",handler:function(){U({type:"loaded"})},priority:-1}),g({debug:m.current,editor:o,evtName:"instanceReady",handler:function(e){var t=e.editor;U({type:"ready"}),n&&!r&&t.setReadOnly(!1),O.current&&t.setData(O.current,{noSnapshot:!0,callback:function(){t.resetUndo()}})},priority:-1}),g({debug:m.current,editor:o,evtName:"destroy",handler:function(){U({type:"destroyed"})},priority:-1}),U({type:"unloaded",payload:o})})).catch((function(e){console.error(e),U({type:"error"})}))}return function(){P&&P.destroy()}}),[P,u]),{editor:P,status:null==P?void 0:P.status,error:"error"===L,loading:"loading"===L}}function k(e,t){switch(t.type){case"init":return o(o({},e),{hookStatus:"init"});case"loading":return o(o({},e),{hookStatus:"loading"});case"unloaded":return{editor:t.payload,hookStatus:"unloaded"};case"loaded":return o(o({},e),{hookStatus:"loaded"});case"ready":return o(o({},e),{hookStatus:"ready"});case"destroyed":return{editor:void 0,hookStatus:"destroyed"};case"error":return{editor:void 0,hookStatus:"error"};default:return e}}var R,P,L,U,_={exports:{}};_.exports=function(){if(U)return L;U=1;var e=P?R:(P=1,R="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED");function t(){}function n(){}return n.resetWarningCache=t,L=function(){function r(t,n,r,o,a,i){if(i!==e){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}function o(){return r}r.isRequired=r;var a={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:o,element:r,elementType:r,instanceOf:o,node:r,objectOf:o,oneOf:o,oneOfType:o,shape:o,exact:o,checkPropTypes:n,resetWarningCache:t};return a.PropTypes=a,a}}()();var I=r.useEffect,N=r.useRef,K=r.useState;function F(e){var t=e.config,n=void 0===t?{}:t,o=e.debug,a=e.editorUrl,i=e.initData,d=e.name,c=e.readOnly,s=e.style,u=e.type,y=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["config","debug","editorUrl","initData","name","readOnly","style","type"]),g=K(null),m=g[0],b=g[1],O=N(y);n&&"boolean"==typeof c&&(n.readOnly=c);var E=j({config:n,dispatchEvent:function(e){var t=e.type,n=e.payload,r=f(l(t)),o=O.current[r];o&&o(n)},debug:o,editorUrl:a,element:m,initContent:"string"==typeof i?i:void 0,subscribeTo:Object.keys(y).filter((function(e){return 0===e.indexOf("on")})).map(p),type:u}),S=E.editor,x=E.status;return I((function(){var e="inline"!==u&&S&&("loaded"===x||"ready"===x);return s&&e&&S.container.setStyles(s),function(){s&&e&&Object.keys(s).map(v).forEach((function(e){S.container.removeStyle(e)}))}}),[S,x,s,u]),I((function(){S&&"ready"===x&&"boolean"==typeof c&&S.setReadOnly(c)}),[S,x,c]),r.createElement("div",{id:null!=d?d:void 0,ref:b,style:h(null!=u?u:"classic",x,s)},"string"==typeof i?null:i)}var H=o({config:_.exports.object,debug:_.exports.bool,editorUrl:_.exports.string,initData:_.exports.node,name:_.exports.string,readOnly:_.exports.bool,style:_.exports.object,type:_.exports.oneOf(["classic","inline"])},c.reduce((function(e,t){var n;return o(o({},e),((n={})[f(t)]=_.exports.func,n))}),{}));F.propTypes=H,e.CKEditor=F,e.CKEditorEventAction=y,e.prefixEventName=u,e.registerEditorEventHandler=g,e.stripPrefix=l,e.useCKEditor=j,Object.defineProperty(e,"__esModule",{value:!0})}));
